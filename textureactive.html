<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>ZIM - TextureActive Cylinder - Code Creativity</title>
        <script type="module">
            import zim from "https://zimjs.org/cdn/016/zim_three";
            new Frame(FIT, 1024, 768, light, dark, ready);
            function ready() {
                // Given F, S, W, H or frame, stage, stageW, stageH

                // STYLE = {borderColor:black, borderWidth:5, once:true}

                const panel = new TextureActive(200,100);
                const label = new Label({text:"CHOOSE", align:CENTER}).centerReg(panel);
                
                const list = new List(400,600);
                
                const menu = new TextureActive({
                    width:list.width-50, 
                    height:list.height, 
                    corner:0,
                    color:pink
                });

                list.center(menu);

                const three = new Three({
                    width:window.innerWidth, 
                    height:window.innerHeight, 
                    cameraPosition:new THREE.Vector3(50,50,80),
                    textureActive:true
                });

                const renderer = three.renderer;
                const scene = three.scene;
                const camera = three.camera;

                const controls = new OrbitControls(camera, renderer.domElement);

                // TEXTUREACTIVES
                // create TextureActives object to handle all TextureActive objects and related meshes
                // see https://zimjs.com/docs.html?item=TextureActives
                // actives, threejs, zimThree, renderer, scene, camera, controls, layers, near, far, ignoreList, toggleKey, color, outerColor
                // Note we optionally set the active layer to 1 so that means we need to match the layer when adding meshes later on
                // Note we optionally set the far to 1000, use the scrollwheel to zoom out and the menu becomes non-interactive (orbit controls take over)
                // Parameters are actives, threejs, zimThree, renderer, scene, camera, controls, layers, near, far, ignoreList, toggleKey

                const textureActives = new TextureActives([panel, menu], THREE, three, renderer, scene, camera, controls);

                // textureActive, textureActives, scale, curve, opacity, material, doubleSide, colorSpace
                const text = three.makePanel(panel, textureActives, .2, 5);
                scene.add(text);

                const geometry = new THREE.CylinderGeometry(10, 10, 80);
                const texture = new THREE.CanvasTexture(menu.canvas); 
                const material = new THREE.MeshBasicMaterial({map:texture}); 


                const cylinder = new THREE.Mesh(geometry, material);
                cylinder.position.x = -40;          
                scene.add(cylinder);  
                textureActives.addMesh(cylinder); 

                
            } // end ready
        </script>
        <meta name="viewport" content="width=device-width, user-scalable=no" />
    </head>
    <body></body>
</html>